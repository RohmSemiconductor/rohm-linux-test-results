BuildBot project: Linux_Mainline
Linux version: v6.13-rc5
Commit hash: fc033cf25e612e840e545f8d5ad2edd6ba613ed5

Kunit test result: test_linear_ranges: PASSED

Kunit test result: iio_test_gts: PASSED

Testing: bd9576 PMIC
Test results: bd9576: PASSED

Testing: bd71847 PMIC
Test results: bd71847: PASSED

Testing: bd71815 PMIC
Test results: bd71815: PASSED

Testing: bd71828 PMIC
Test results: bd71828: PASSED

Testing: bd96801 PMIC
Test results: bd96801: PASSED

Testing: bd71837 PMIC
Test results: bd71837: PASSED

Git bisect state: success
f718faf3940e95d5d34af9041f279f598396ab7d is the first bad commit
commit f718faf3940e95d5d34af9041f279f598396ab7d
Author: Chen Ridong <chenridong@huawei.com>
Date:   Tue Dec 17 00:48:18 2024 +0000

    freezer, sched: Report frozen tasks as 'D' instead of 'R'
    
    Before commit:
    
      f5d39b020809 ("freezer,sched: Rewrite core freezer logic")
    
    the frozen task stat was reported as 'D' in cgroup v1.
    
    However, after rewriting the core freezer logic, the frozen task stat is
    reported as 'R'. This is confusing, especially when a task with stat of
    'S' is frozen.
    
    This bug can be reproduced with these steps:
    
            $ cd /sys/fs/cgroup/freezer/
            $ mkdir test
            $ sleep 1000 &
            [1] 739         // task whose stat is 'S'
            $ echo 739 > test/cgroup.procs
            $ echo FROZEN > test/freezer.state
            $ ps -aux | grep 739
            root     739  0.1  0.0   8376  1812 pts/0    R    10:56   0:00 sleep 1000
    
    As shown above, a task whose stat is 'S' was changed to 'R' when it was
    frozen.
    
    To solve this regression, simply maintain the same reported state as
    before the rewrite.
    
    [ mingo: Enhanced the changelog and comments ]
    
    Fixes: f5d39b020809 ("freezer,sched: Rewrite core freezer logic")
    Signed-off-by: Chen Ridong <chenridong@huawei.com>
    Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@kernel.org>
    Acked-by: Tejun Heo <tj@kernel.org>
    Acked-by: Michal Koutn√Ω <mkoutny@suse.com>
    Link: https://lore.kernel.org/r/20241217004818.3200515-1-chenridong@huaweicloud.com

 include/linux/sched.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

